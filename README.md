# 🌳 나무의사 PDF Q&A MCP 서버

나무의사 자격증 시험을 위한 **PDF 기반 질문답변 시스템**을 제공하는 MCP 서버입니다.

## ✨ 주요 기능

### 📚 1. 완전한 교재 통합 시스템
- **25개 나무의사 교재 완전 통합**: 모든 PDF 교재를 마크다운으로 변환하여 데이터베이스에 저장
- **지능형 PDF 처리**: 텍스트 추출 + OCR 하이브리드 처리로 100% 내용 추출
- **과목별 자동 분류**: 수목생리학, 수목병리학, 수목해충학, 수목관리학, 나무보호법 등 자동 분류
- **섹션별 구조화**: 각 교재의 장, 절, 항목별로 체계적 구조화

### 📚 2. PDF 기반 질문–답변 시스템
- **다중 PDF 검색**: 25권의 교재를 동시에 검색
- **정확한 근거 제시**: 교재명, 페이지 번호, 섹션, 근거 문장 함께 표시
- **관련도 점수**: AI 기반 검색 결과 관련도 점수 제공

### 📄 3. 기출문제 → 교재 근거 연결
- **자동 근거 검색**: 기출문제에 대한 교재 단락 자동 검색
- **페이지 링크**: 교재 페이지로 바로 이동 가능
- **다중 근거 제시**: 여러 교재의 관련 내용 동시 표시

### 🧠 4. 해설 생성 + 개념 정리 + 암기 시스템
- **자동 해설 생성**: 교재 근거 기반 상세 해설 작성
- **핵심 개념 추출**: 중요 키워드/개념 자동 추출 및 저장
- **암기카드 생성**: 클로즈 카드 형식으로 자동 생성
- **복습 주기 관리**: 1주 간격 반복 복습 시스템

### 🔁 5. 반복 기출 자동 클러스터링
- **개념별 분류**: 같은 개념의 다양한 기출 문제 자동 분류
- **연속 출제**: 한 개념에 대한 다양한 문제 유형 연속 학습

### 📌 6. 북마크 기능
- **전역 북마크**: 기출문제, 해설, 교재 단락, 중요 개념 등 모든 내용 북마크
- **통합 관리**: 하나의 페이지에서 모든 북마크 조회
- **시험 전날 요약**: 북마크 기반 자동 요약 생성

## 📂 데이터베이스 포함 내용

이 프로젝트는 다음 데이터를 포함하고 있습니다:
- 📝 **기출문제**: 1,051개 (2019-2025년)
- 📚 **교재**: 18권 (전체 텍스트 추출 완료)
  - 수목병리학: 4권
  - 기출문제집: 3권
  - 2차시험: 2권
  - 수목생리학: 2권
  - 기타 과목별 교재들

> ⚠️ **중요**: 데이터베이스 파일(120MB)은 크기 제한으로 Git에 포함되지 않습니다. [DATABASE_DOWNLOAD.md](DATABASE_DOWNLOAD.md)를 참조하여 다운로드하세요.

## 🚀 설치 방법

### 방법 1: 원클릭 자동 설치 (권장) 🎯
```bash
npx tree-doctor-pdf-qa-mcp
```
이 명령어 하나로 모든 설치가 자동으로 진행됩니다!

### 방법 2: 수동 설치
```bash
# 1. 프로젝트 클론
git clone https://github.com/VoidLight00/tree-doctor-pdf-qa-mcp.git
cd tree-doctor-pdf-qa-mcp

# 2. 자동 설치 실행
npm run install-all

# 또는 개별 단계 실행:
npm install
# 데이터베이스 다운로드 (DATABASE_DOWNLOAD.md 참조)
npm run build
```

### 3. Claude Desktop 설정
```json
{
  "mcpServers": {
    "tree-doctor-pdf-qa": {
      "command": "node",
      "args": ["C:\\경로\\tree-doctor-pdf-qa-mcp\\dist\\index.js"],
      "env": {}
    }
  }
}
```

### 4. Claude Desktop 재시작
Claude Desktop을 재시작하면 자동으로 MCP 서버가 연결됩니다.

### ✅ Windows 호환성
- 모든 경로는 자동으로 변환됩니다
- SQLite 데이터베이스 크로스플랫폼 지원
- PDF 파일 없이도 사용 가능 (이미 텍스트 추출 완료)

## 🛠️ 사용 예시

### 교재 검색
```
💬 "광합성에 대해 설명해주세요"
💬 "나무보호법 제1조에 대해 알려주세요"
💬 "느티나무 잎에 갈색 반점이 생겼어요. 진단해주세요"
💬 "수목생리학 교재에서 증산작용을 검색해주세요"
```

### 교재 관리
```
💬 "로드된 교재 목록을 보여주세요"
💬 "수목병리학 과목의 교재들을 보여주세요"
💬 "교재 통계를 보여주세요"
💬 "과목 목록을 보여주세요"
```

### 기출문제 근거 찾기
```
💬 "다음 중 수목병리학에서 다루는 내용이 아닌 것은?"
💬 "나무보호법상 금지행위에 해당하는 것은?"
```

### 해설 생성
```
💬 "이 문제의 정답은 3번입니다. 해설을 생성해주세요"
```

### 북마크 및 학습 자료 관리
```
💬 "이 개념을 북마크로 저장해주세요"
💬 "오늘 복습할 암기카드를 보여주세요"
💬 "시험 전날 요약을 생성해주세요"
```

## 🔧 MCP 도구 목록

### 교재 관리 도구
1. **load_textbooks**: 교재 PDF 파일들을 로드하고 데이터베이스에 저장
2. **search_textbooks**: 교재에서 질문에 대한 답변 검색
3. **get_textbooks**: 로드된 교재 목록 조회
4. **get_textbook_contents**: 특정 교재의 내용 섹션별 조회
5. **get_subjects**: 로드된 교재들의 과목 목록 조회
6. **get_textbook_stats**: 교재 통계 정보 조회

### 기존 도구들
7. **search_pdf**: PDF 교재에서 질문에 대한 답변 검색
8. **find_source**: 기출문제에 대한 교재 근거 찾기
9. **generate_explanation**: 기출문제 해설 생성
10. **extract_concepts**: 텍스트에서 중요 개념 추출
11. **create_bookmark**: 북마크 생성
12. **get_bookmarks**: 북마크 조회
13. **create_flashcard**: 암기카드 생성
14. **get_study_materials**: 학습 자료 조회

## 📊 데이터베이스 구조

### 교재 관리 테이블
- **textbooks**: 교재 메타데이터 저장 (제목, 과목, 페이지 수, 처리 방법 등)
- **textbook_contents**: 교재 내용 섹션별 저장 (제목, 내용, 페이지 범위, 레벨 등)

### 기존 테이블들
- **pdf_contents**: PDF 페이지별 내용 저장
- **bookmarks**: 북마크 정보 저장
- **concepts**: 추출된 개념 저장
- **flashcards**: 암기카드 정보 저장

## 🎯 특징

- **📚 완전한 교재 통합**: 25개 나무의사 교재를 100% 디지털화
- **🔍 지능형 검색**: Fuse.js 기반 의미적 검색 + 관련도 점수
- **🧠 하이브리드 처리**: 텍스트 추출 + OCR 조합으로 완벽한 내용 추출
- **📱 크로스플랫폼**: Windows, macOS, Linux 지원
- **🚀 빠른 성능**: SQLite 기반 로컬 데이터베이스
- **📚 대용량 처리**: 최대 1GB PDF 파일 지원
- **🎨 사용자 친화적**: 직관적인 Markdown 형태 출력
- **📊 과목별 분류**: 자동 과목 분류 및 통계 제공

## 🔧 시스템 요구사항

- **Node.js**: 18.0.0 이상
- **메모리**: 최소 4GB RAM 권장
- **저장공간**: PDF 파일 크기의 2배 이상
- **Claude Desktop**: 최신 버전

## 📝 라이선스

MIT License

## 👨‍💻 개발자

VoidLight - 나무의사 자격증 전문 AI 학습 시스템 개발

---

💪 **나무의사 자격증 합격을 위한 든든한 동반자!**